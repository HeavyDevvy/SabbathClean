Berry Events - Fix Re-book Button Flow
CRITICAL FIX: The "Re-book" button must work EXACTLY like the "Book Now" button on My Profile page.

Problem

"Re-book" shows service selector popup
Clicking a service does nothing
User is not directed to booking steps

Solution
Copy the complete "Book Now" logic from My Profile and apply it to Past Bookings.

Implementation Steps
Step 1: Locate the "Book Now" Button Code
Find the exact code used by the "Book Now" button on the My Profile page:
javascript// Find this in your My Profile component
const handleBookNow = () => {
  // This might open a modal/popup to select service
  // Then navigates to booking steps
  // Find ALL the logic including:
  // - Service selection handler
  // - Navigation/routing to booking flow
  // - State initialization
};
Step 2: Copy the Complete Flow
In your Past Bookings component, import/copy these elements:

The service selection popup/modal component (the exact same one used in My Profile)
The click handler that processes service selection
The navigation logic that routes to booking steps
Any state management used for the booking flow

Step 3: Apply to "Re-book" Button
Replace the current Re-book button with:
javascript// In Past Bookings component

// Copy the EXACT same state and handlers from My Profile
const [showServicePopup, setShowServicePopup] = useState(false);
const [selectedService, setSelectedService] = useState(null);

// Copy the EXACT handler from My Profile "Book Now"
const handleServiceSelect = (service) => {
  setSelectedService(service);
  setShowServicePopup(false);
  
  // This is the critical part - copy the EXACT navigation logic
  // from My Profile that directs user to booking steps
  // Examples of what this might look like:
  
  // Option A: If using React Router
  navigate('/booking', { 
    state: { 
      serviceType: service.type,
      serviceId: service.id 
    } 
  });
  
  // Option B: If using a booking context/state
  startBookingFlow({
    service: service,
    // Add any other initialization data
  });
  
  // Option C: If using a different routing method
  // Copy whatever method My Profile uses
};

// Re-book button click handler
const handleRebook = (pastBooking) => {
  // Show the same service selector as "Book Now"
  setShowServicePopup(true);
  
  // Optionally pre-select the service from past booking
  setSelectedService(pastBooking.serviceType);
};

// In your JSX for each past booking card:
<button onClick={() => handleRebook(booking)}>
  Re-book
</button>

{/* Copy the EXACT service popup component from My Profile */}
{showServicePopup && (
  <ServiceSelectorPopup
    onSelect={handleServiceSelect}
    onClose={() => setShowServicePopup(false)}
    preSelectedService={selectedService} // Optional
  />
)}
Step 4: Ensure Complete Navigation Chain
Make sure you copy ALL parts of the flow:

✅ Service selector popup opens
✅ User clicks a service
✅ Popup closes
✅ User is navigated/routed to booking steps ← THIS IS THE MISSING PIECE
✅ Booking form opens for selected service
✅ User can complete the booking


Specific Code to Check
Find in My Profile component and copy to Past Bookings:
javascript// 1. Find the import statements
import { useNavigate } from 'react-router-dom'; // or whatever routing you use
import { ServiceSelectorModal } from './components/ServiceSelector'; // or similar

// 2. Find the complete state management
const [isBookingModalOpen, setIsBookingModalOpen] = useState(false);

// 3. Find the complete handler - THIS IS KEY
const handleBookNowClick = () => {
  setIsBookingModalOpen(true);
};

const handleServiceSelected = (service) => {
  setIsBookingModalOpen(false);
  // THIS NEXT LINE IS CRITICAL - find and copy it
  navigateToBookingSteps(service); // Whatever this function is called
};

// 4. Copy the navigation function
const navigateToBookingSteps = (service) => {
  // Find this exact logic in My Profile
  // It might be navigate(), router.push(), setState(), etc.
};

Alternative Approach: Direct Code Reuse
If the code is complex, extract it into a shared hook or component:
Create a shared hook:
javascript// Create: hooks/useBookingFlow.js

export const useBookingFlow = () => {
  const navigate = useNavigate();
  const [showServicePopup, setShowServicePopup] = useState(false);
  
  const startBooking = (preSelectedService = null) => {
    if (preSelectedService) {
      // Direct navigation with pre-selected service
      navigate('/booking/steps', { 
        state: { service: preSelectedService } 
      });
    } else {
      // Show service selector first
      setShowServicePopup(true);
    }
  };
  
  const handleServiceSelect = (service) => {
    setShowServicePopup(false);
    navigate('/booking/steps', { 
      state: { service } 
    });
  };
  
  return {
    showServicePopup,
    setShowServicePopup,
    startBooking,
    handleServiceSelect
  };
};
Use in both My Profile and Past Bookings:
javascript// In My Profile component:
const { startBooking, handleServiceSelect, showServicePopup, setShowServicePopup } = useBookingFlow();

<button onClick={() => startBooking()}>
  Book Now
</button>

// In Past Bookings component:
const { startBooking, handleServiceSelect, showServicePopup, setShowServicePopup } = useBookingFlow();

<button onClick={() => startBooking(booking.serviceType)}>
  Re-book
</button>

Testing Checklist
After implementing, test this exact flow:

 Go to My Bookings page
 Find a past booking
 Click "Re-book" button
 Service selector popup appears
 Click on a service
 Popup closes immediately
 User is taken to booking steps page/view
 Booking form shows for selected service
 User can fill in details and complete booking
 No console errors appear
 No blank screens appear


Debug Tips
If it still doesn't work after implementation:
Add console logs to trace the flow:
javascriptconst handleServiceSelect = (service) => {
  console.log('1. Service selected:', service);
  setShowServicePopup(false);
  console.log('2. Popup closed');
  
  console.log('3. About to navigate with:', service);
  // Your navigation code here
  navigate('/booking/steps', { state: { service } });
  console.log('4. Navigation called');
};
Check the browser console - it will show you exactly where the flow breaks.

Requirements

✅ "Re-book" uses identical logic to "Book Now"
✅ Service selection navigates to booking steps
✅ No error codes
✅ No blank screens
✅ User completes full booking flow successfully

The key is: don't create new logic, copy the existing working "Book Now" logic exactly.